{% extends "layout.html" %}

<!-- content -->
{% block content %}
<h1 class="header">ë¡œê·¸ì¸</h1>
<div class="body">
    <!-- ID -->
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text label">ID</span>
        </div>
        <input type="text" class="form-control" id="id" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”" aria-label="id"
               aria-describedby="id">
    </div>
    <!-- PW -->
    <div class="input-group mb-3">
        <div class="input-group-prepend">
            <span class="input-group-text label">PW</span>
        </div>
        <input type="password" class="form-control" id="pw" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”" aria-label="pw"
               aria-describedby="pw">
    </div>
</div>
<div class="footer">
    <!-- Sign In -->
    <button class="btn btn-outline-success sign-in" onclick="login()">ë¡œê·¸ì¸</button>

    <!-- Sign Up -->
    <a class="sign-up" href="/register">íšŒì›ê°€ì… </a>
</div>
{% endblock %}

<!-- style -->
{% block style %}
<style>
    .header {
        text-align: center;
        margin-bottom: 32px;
    }

    h1 {
        color: darkgreen;
        text-shadow: 3px 3px 0px darkseagreen;

    }

    .body {
        margin: 32px 0;
    }

    .sign-in {
        width: 100%;
        margin-bottom: 16px;
    }

    .footer {
        text-align: right;
    }

    a {
        color: darkgreen;
    }

    .label {
        width: 50px;
        text-align: center;
        display: flex;
        justify-content: center;
    }

</style>
{% endblock %}

<!-- script -->
{% block script %}
<script>
    function login() {
        let id = $('#id').val()
        let pw = $('#pw').val()

        $.ajax({
            type: "POST",
            url: "/api/login",
            data: {id_give: id, pw_give: pw},
            success: function (response) {

                if (response['result'] === 'success') {
                    // jwt í† í°ì„ token_giveì´ë¼ëŠ” í‚¤ ê°’ìœ¼ë¡œ ì¿ í‚¤ì— ì €ì¥
                    $.cookie('user', response['user'])
                    $.cookie('token_give', response['token'])
                    let nickname = response['user']
                    alert(nickname + 'ë‹˜ ë°˜ê°‘ìŠµë‹ˆë‹¤ ' + 'ë¡œê·¸ì¸ ì„±ê³µ ğŸ‘')
                    location.href = '/'
                } else {
                    // ë¡œê·¸ì¸ì´ ì•ˆë˜ë©´ ì—ëŸ¬ë©”ì‹œì§€ë¥¼ ë„ì›ë‹ˆë‹¤.
                    alert(response['msg'])
                }
            }
        })
    }
</script>
{% endblock %}